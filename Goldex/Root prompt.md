> prompt: напиши процессы и схему файлов для следующего процесса:
- все процессы нужно документировать:
	- для истории
	- так как шаги на ИИ занимают значительное время, нужно помнить план, что сейчас делается, и результат - успешно или была какая то проблема
	- возможность откатиться к одной из предыдущих версий
	- в идеале, предыдущие ветки должны быть сохранены
	- важно, что в случае проблем мы не исправляем через ИИ результат, а меняем промпт и делаем новую ветку рассуждений

Сделаю так: сначала — схема папок/файлов, потом — описания процессов (что и в какой последовательности делать), с учётом веток, истории и откатов.

---

## 1. Структура папок и файлов

Предлагаю один корневой каталог для всех задач с ИИ, внутри — по проектам, внутри проекта — ветки и запуски.

```text
ai/
└── 2025-12-01_project-name/
    ├── project.md          # Описание проекта
    ├── plan.md             # Текущий план работ
    ├── journal.md          # Журнал всех шагов (история)
    └── branches/
        ├── A_main/         # Ветка A (основная)
        │   ├── branch-info.md
        │   └── runs/
        │       ├── A_001/
        │       │   ├── prompt.md        # Промпт, отправленный ИИ
        │       │   ├── context.md       # Контекст/данные, если есть
        │       │   ├── result_raw.md    # Чистый ответ ИИ (не трогаем)
        │       │   └── evaluation.md    # Оценка результата, статус, проблемы
        │       └── A_002/
        │           ├── ...
        └── B_alt-from-A_002/            # Ветка B от шага A_002
            ├── branch-info.md
            └── runs/
                └── B_001/
                    ├── prompt.md
                    ├── context.md
                    ├── result_raw.md
                    └── evaluation.md
```

### Что в каких файлах

**`project.md`** (описание проекта)

- Название проекта
    
- Цель
    
- Ограничения (технологии, сроки и т.п.)
    
- Критерии успеха
    
- Ссылки на внешние материалы
    

---

**`plan.md`** (текущий план и статус)

Минимум — простой список:

```markdown
# План

## Текущее состояние
- Ветка: A_main
- Последний шаг: A_002
- Статус: в работе / ожидает проверки / завершён

## Крупные шаги
1. Сформулировать ТЗ — ветка A
2. Сделать архитектуру — ветка B
3. Реализовать и протестировать — ветка C

## Сделано
- [x] 2025-12-01: A_001 – сбор требований (успешно, есть замечания)
- [ ] 2025-12-02: A_002 – уточнение ролей пользователей
```

---

**`journal.md`** (журнал шагов — “история”)

Каждый запуск ИИ — отдельная запись:

```markdown
## 2025-12-01 15:32  |  A_001

- Ветка: A_main
- Цель шага: собрать первичное ТЗ
- Файлы:
  - branches/A_main/runs/A_001/prompt.md
  - branches/A_main/runs/A_001/result_raw.md
- Статус: ✅ Успешно
- Краткий результат: черновик ТЗ по разделам
- Проблемы: нет
- Следующее действие: уточнить роли в системе (A_002)

---

## 2025-12-01 18:05  |  A_002

- Ветка: A_main
- Цель шага: детализировать роли и права
- Статус: ⚠️ Частично
- Проблемы: ИИ перепутал роли администратора и модератора
- Решение: создать новую ветку B_alt-from-A_002 с уточнённым промптом
```

---

**`branch-info.md`** (паспорт ветки)

```markdown
# Ветка A_main

- Идентификатор: A_main
- Родительская ветка: нет (основная)
- Точка ответвления: n/a
- Цель ветки: получить основное согласованное ТЗ
- Правила:
  - Не править result_raw.md
  - Все изменения задавать через новый prompt в новых запусках

## История ветки
- A_001: черновик ТЗ – успешно
- A_002: детализация ролей – частично, есть проблемы
```

Для ветки, ответвившейся от другой:

```markdown
# Ветка B_alt-from-A_002

- Идентификатор: B_alt-from-A_002
- Родительская ветка: A_main
- Точка ответвления: A_002
- Причина создания:
  - Нужно переопределить роли, не ломая основную ветку
- Гипотеза: более строгий промпт с перечислением ролей и примерами
```

---

**Папка запуска, например `A_001/`**

- `prompt.md` — полный текст промпта, который отправлялся ИИ (включая системные указания, если они были).
    
- `context.md` — вставленный контекст (кусок ТЗ, данные, примеры). Можно не выделять отдельно, если всё в `prompt.md`.
    
- `result_raw.md` — _сырое_ содержимое ответа ИИ, как есть. Не менять, не дописывать, не редактировать.
    
- `evaluation.md` — краткий разбор: что получилось, что не так, решения/следующие шаги.
    

Пример `evaluation.md`:

```markdown
# Оценка A_001

- Статус: ✅ Успешно
- Что хорошо:
  - Структура ТЗ по разделам
  - Выделены ключевые сущности
- Проблемы:
  - Нет раздела по логированию и мониторингу
- Вывод:
  - В целом годится как базовый черновик
- Следующий шаг:
  - A_002 – уточнить разделы по правам и логированию
```

---

## 2. Процессы

### Процесс 1. Запуск нового проекта с ИИ

1. **Создать папку проекта**  
    `ai/2025-12-01_project-name/`
    
2. **Создать `project.md`**  
    Заполнить цель, критерии успеха, ограничения.
    
3. **Создать `plan.md`**  
    Набросать крупные шаги (по смыслу, не детализируя).
    
4. **Создать `journal.md`**  
    Пустой файл с заголовком `# Журнал`.
    
5. **Создать первую ветку**  
    Папка: `branches/A_main/` и внутри файл `branch-info.md`.
    
6. **Создать первый запуск**  
    Папка: `branches/A_main/runs/A_001/` с шаблонными файлами (`prompt.md`, `result_raw.md`, `evaluation.md`).
    
7. **После запуска ИИ**
    
    - Вставить фактический промпт в `prompt.md` (если сначала писали черновик — обновить до финального текста, _не меняя смысл_).
        
    - Вставить ответ ИИ в `result_raw.md` (без правок).
        
    - Написать оценку в `evaluation.md`.
        
    - Добавить запись в `journal.md` и обновить `plan.md` (что сделано, что дальше).
        

---

### Процесс 2. Новый шаг в существующей ветке

1. **Определить цель шага**  
    В одной фразе: “уточнить…”, “переделать…”, “сгенерировать…”.
    
2. **Создать новую папку запуска**  
    Например, следующий номер: `A_002/`.
    
3. **Написать промпт** в `prompt.md`
    
    - Учесть проблемы, описанные в предыдущем `evaluation.md`.
        
    - Явно указать, что уже было сделано.
        
4. **Запустить ИИ**, получить ответ.
    
5. **Сохранить результат**
    
    - Ответ ИИ → `result_raw.md` (без редактирования).
        
    - При необходимости: важные выдержки можно уже руками вынести куда-то ещё, но это отдельный файл (например, `notes.md` или итоговый документ).
        
6. **Оценить результат** в `evaluation.md`
    
    - Статус: ✅ / ⚠️ / ❌
        
    - Что получилось хорошо
        
    - Какие проблемы
        
    - Что делать дальше (новый шаг в той же ветке или новая ветка)
        
7. **Обновить `journal.md` и `plan.md`**  
    Внести новую запись и статус.
    

---

### Процесс 3. Создание новой ветки (ответвление)

Триггер: результат шага неудобно “подправить” в той же логике, нужно иное направление (например, сильно другой стиль решения).

1. **Определить, от какого шага ответвляемся**  
    Например, шаг `A_002`.
    
2. **Создать папку ветки**  
    `branches/B_alt-from-A_002/`
    
3. **Заполнить `branch-info.md`**
    
    - Родитель: `A_main`
        
    - Точка: `A_002`
        
    - Причина ответвления
        
    - Гипотеза / новая стратегия
        
4. **Создать первый запуск ветки**  
    `branches/B_alt-from-A_002/runs/B_001/`
    
5. **Сформулировать новый промпт**  
    Уже с учётом проблем, описанных в `A_002/evaluation.md`.
    
6. **Запустить ИИ, сохранить результат**  
    Как обычно: `result_raw.md` + `evaluation.md`.
    
7. **Зафиксировать в журнале**  
    В `journal.md` ясно указать, что это новая ветка, и на каком шаге она отделилась.
    

Важно:  
❗ _Мы не “просим ИИ исправить старый ответ”._  
Если есть проблемы — новая ветка, новый промпт, новое рассуждение.

---

### Процесс 4. Завершение / заморозка ветки

Когда ветка дала окончательный результат (или признана тупиковой):

1. В `branch-info.md` дописать раздел:
    

```markdown
## Итоговый статус ветки

- Статус: завершена / тупиковая / заморожена
- Итоговый артефакт: файл/путь
- Комментарий: почему так
```

2. В `journal.md` — запись с пометкой о завершении ветки.
    
3. В `plan.md` — пометить соответствующий шаг как выполненный или отменённый.
    

---

### Процесс 5. Откат к прошлой версии

Откат в данной схеме — это по сути работа **с предыдущим шагом или веткой**, без удаления нового.

1. **Найти нужное состояние**  
    По `journal.md` — нужный шаг/ветку (например, `B_001`).
    
2. **Решить, что именно “откатываем”**
    
    - Берём результат из `result_raw.md` той версии и считаем его актуальным.
        
    - Либо **создаём новую ветку** от этого шага (например, `C_from-B_001`).
        
3. **Создать новую ветку (если нужно)**  
    По Процессу 3, указав, что это ответвление от `B_001`.
    
4. **Ничего не удаляем**  
    Все старые ветки и шаги остаются как история.
    

---

### Процесс 6. Ручная доработка результатов

Рано или поздно нужен “чистый”, человеко-читаемый итоговый документ.

1. Создать отдельную папку, например:
    
    ```text
    final/
      └── spec_v1_human-edited.md
    ```
    
2. Содержимое собирать ручным редактированием, **не через ИИ-правки существующего `result_raw.md`**.  
    Можно использовать ИИ, но как отдельные новые вызовы (с отдельными промптами и ветками).
    

---

Если хочешь, в следующий шаг могу:

- дать конкретные шаблоны файлов (`prompt.md`, `evaluation.md`, `branch-info.md`) под copy-paste;
    
- или адаптировать структуру под git (с рекомендациями по веткам и коммитам).